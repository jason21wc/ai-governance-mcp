{
  "description": "Benchmark test cases for Context Engine retrieval quality",
  "version": "2.0",
  "created": "2026-02-12",
  "updated": "2026-02-13",
  "notes": "Uses this project's codebase as corpus. Expected files are relative paths from project root.",
  "metrics": {
    "target_mrr": 0.5,
    "target_recall_at_5": 0.7,
    "target_recall_at_10": 0.8
  },
  "test_cases": [
    {
      "id": "ce-1",
      "query": "file watcher circuit breaker consecutive failures",
      "expected_files": ["src/ai_governance_mcp/context_engine/project_manager.py", "src/ai_governance_mcp/context_engine/watcher.py"],
      "description": "Circuit breaker logic for watcher failures"
    },
    {
      "id": "ce-2",
      "query": "BM25 keyword search tokenization",
      "expected_files": ["src/ai_governance_mcp/context_engine/indexer.py", "src/ai_governance_mcp/context_engine/project_manager.py"],
      "description": "BM25 index building and keyword search"
    },
    {
      "id": "ce-3",
      "query": "atomic file write JSON corruption prevention",
      "expected_files": ["src/ai_governance_mcp/context_engine/storage/filesystem.py"],
      "description": "Atomic write pattern for crash safety"
    },
    {
      "id": "ce-4",
      "query": "PDF content extraction page limit",
      "expected_files": ["src/ai_governance_mcp/context_engine/connectors/pdf.py"],
      "description": "PDF connector with page limits"
    },
    {
      "id": "ce-5",
      "query": "rate limiting token bucket index_project",
      "expected_files": ["src/ai_governance_mcp/context_engine/server.py"],
      "description": "Rate limiting for index_project tool"
    },
    {
      "id": "ce-6",
      "query": "LRU project eviction MAX_LOADED_PROJECTS",
      "expected_files": ["src/ai_governance_mcp/context_engine/project_manager.py"],
      "description": "LRU eviction of loaded projects"
    },
    {
      "id": "ce-7",
      "query": "embedding model allowlist security validation",
      "expected_files": ["src/ai_governance_mcp/context_engine/indexer.py"],
      "description": "Embedding model safety allowlist"
    },
    {
      "id": "ce-8",
      "query": "gitignore contextignore pattern matching",
      "expected_files": ["src/ai_governance_mcp/context_engine/indexer.py"],
      "description": "Ignore pattern loading and matching"
    },
    {
      "id": "ce-9",
      "query": "how does the watcher interact with the indexer for incremental updates",
      "expected_files": ["src/ai_governance_mcp/context_engine/project_manager.py", "src/ai_governance_mcp/context_engine/watcher.py"],
      "description": "Cross-file relationship: watcher triggers indexer"
    },
    {
      "id": "ce-10",
      "query": "error handling patterns in MCP server tools",
      "expected_files": ["src/ai_governance_mcp/context_engine/server.py"],
      "description": "Natural language query about error handling"
    },
    {
      "id": "ce-11",
      "query": "tree-sitter AST parsing function definitions",
      "expected_files": ["src/ai_governance_mcp/context_engine/connectors/code.py"],
      "description": "Tree-sitter code parsing implementation"
    },
    {
      "id": "ce-12",
      "query": "markdown heading extraction document chunking",
      "expected_files": ["src/ai_governance_mcp/context_engine/connectors/document.py"],
      "description": "Document connector heading-based chunking"
    },
    {
      "id": "ce-13",
      "query": "hybrid search combining semantic and keyword scores",
      "expected_files": ["src/ai_governance_mcp/context_engine/project_manager.py"],
      "description": "Score fusion algorithm"
    },
    {
      "id": "ce-14",
      "query": "incremental indexing file hash change detection",
      "expected_files": ["src/ai_governance_mcp/context_engine/indexer.py"],
      "description": "File change detection via content hash"
    },
    {
      "id": "ce-15",
      "query": "spreadsheet CSV Excel parsing",
      "expected_files": ["src/ai_governance_mcp/context_engine/connectors/spreadsheet.py"],
      "description": "Spreadsheet connector"
    },
    {
      "id": "ce-16",
      "query": "project status index size watcher health",
      "expected_files": ["src/ai_governance_mcp/context_engine/project_manager.py", "src/ai_governance_mcp/context_engine/server.py"],
      "description": "Project status reporting across code and docs"
    }
  ]
}
